language: minimal

services:
  - docker

cache:
  directories:
    "./cache"

jobs:
  include:
    - stage: Setup
      if: branch = master
      install:
        - docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD
    - stage: Build
      script:
        - minecraft/build.sh
    - stage: Push
      if: branch = master
      script:
        - utils/push.sh
